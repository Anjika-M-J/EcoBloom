{% extends 'Admin/Head.html' %}
{% block content %}

<style>
/* Page background */
.userlist-page {
    min-height: 100vh;
    background: #f4f6fb;
    padding: 30px;
    font-family: 'Segoe UI', sans-serif;
}

/* Section box */
.user-section {
    background: #ffffff;
    padding: 25px;
    margin-bottom: 30px;
    border-radius: 14px;
    box-shadow: 0 15px 30px rgba(0,0,0,0.08);
}

/* Section headings */
.user-section h3 {
    margin-bottom: 15px;
    color: #4b4ded;
    border-left: 5px solid #4b4ded;
    padding-left: 10px;
}

/* Table styling */
.user-table {
    width: 100%;
    border-collapse: collapse;
}

.user-table td {
    padding: 10px;
    font-size: 14px;
    text-align: center;
}

.user-table tr:first-child {
    background: linear-gradient(90deg, #667eea, #764ba2);
    color: white;
    font-weight: bold;
}

.user-table tr:nth-child(even) {
    background: #f9fafc;
}

.user-table tr:hover {
    background: #eef1ff;
}

/* User photo */
.user-table img {
    border-radius: 8px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}

/* Action links */
.user-table a {
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 13px;
    text-decoration: none;
    font-weight: 600;
    display: inline-block;
}

/* Accept button */
.accept-btn {
    background: #2ecc71;
    color: white;
}

.accept-btn:hover {
    background: #27ae60;
}

/* Reject button */
.reject-btn {
    background: #e74c3c;
    color: white;
}

.reject-btn:hover {
    background: #c0392b;
}

/* Status text */
.status-verified {
    color: #2ecc71;
    font-weight: bold;
}

.status-rejected {
    color: #e74c3c;
    font-weight: bold;
}
</style>

<div class="userlist-page">
<form action="" method="post">
{% csrf_token %}

<!-- PENDING USERS -->
<div class="user-section">
    <h3>User List (Pending)</h3>
    <table border="1" class="user-table">
        <tr>
            <td>SL.No</td>
            <td>Name</td>
            <td>Email</td>
            <td>Contact</td>
            <td>Address</td>
            <td>House No</td>
            <td>Ward</td>
            <td>Photo</td>
            <td colspan="2">Action</td>
        </tr>

        {% for i in userdata %}
        <tr>
            <td>{{forloop.counter}}</td>
            <td>{{i.user_name}}</td>
            <td>{{i.user_email}}</td>
            <td>{{i.user_contactno}}</td>
            <td>{{i.user_address}}</td>
            <td>{{i.user_houseno}}</td>
            <td>{{i.ward_id.ward_number}}</td>
            <td><img src="{{i.user_photo.url}}" width="80px"></td>

            <td>
                {% if i.user_status == 0 %}
                <a class="accept-btn" href="{% url 'Admin:acceptuser' i.id %}">Accept</a>
            </td>
            <td>
                <a class="reject-btn" href="{% url 'Admin:rejectuser' i.id %}">Reject</a>
                {% elif i.user_status == 1 %}
                <span class="status-verified">Verified</span>
                {% elif i.user_status == 2 %}
                <span class="status-rejected">Rejected</span>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>
</div>

<!-- ACCEPTED USERS -->
<div class="user-section">
    <h3>Accepted User List</h3>
    <table border="1" class="user-table">
        <tr>
            <td>SL.No</td>
            <td>Name</td>
            <td>Email</td>
            <td>Contact</td>
            <td>Address</td>
            <td>House No</td>
            <td>Ward</td>
            <td>Photo</td>
            <td>Action</td>
        </tr>

        {% for i in acceptdata %}
        <tr>
            <td>{{forloop.counter}}</td>
            <td>{{i.user_name}}</td>
            <td>{{i.user_email}}</td>
            <td>{{i.user_contactno}}</td>
            <td>{{i.user_address}}</td>
            <td>{{i.user_houseno}}</td>
            <td>{{i.ward_id.ward_number}}</td>
            <td><img src="{{i.user_photo.url}}" width="80px"></td>
            <td><span class="status-verified">Verified</span></td>
        </tr>
        {% endfor %}
    </table>
</div>

<!-- REJECTED USERS -->
<div class="user-section">
    <h3>Rejected User List</h3>
    <table border="1" class="user-table">
        <tr>
            <td>SL.No</td>
            <td>Name</td>
            <td>Email</td>
            <td>Contact</td>
            <td>Address</td>
            <td>House No</td>
            <td>Ward</td>
            <td>Photo</td>
            <td>Status</td>
        </tr>

        {% for i in rejectdata %}
        <tr>
            <td>{{forloop.counter}}</td>
            <td>{{i.user_name}}</td>
            <td>{{i.user_email}}</td>
            <td>{{i.user_contactno}}</td>
            <td>{{i.user_address}}</td>
            <td>{{i.user_houseno}}</td>
            <td>{{i.ward_id.ward_number}}</td>
            <td><img src="{{i.user_photo.url}}" width="80px"></td>
            <td><span class="status-rejected">Rejected</span></td>
        </tr>
        {% endfor %}
    </table>
</div>

</form>
</div>

{% if msg %}
<script>
    alert("{{msg}}");
    window.location = "{% url 'Admin:UserList' %}";
</script>
{% endif %}

{% endblock content %}
